{
  "team_id": "team_3",
  "team_name": "Backend Services",
  "description": "Implement core backend infrastructure and REST API for GaryVision MVP",
  "phase": "Phase 1-2: Foundation & API Development",
  "agents": [
    {
      "id": "backend_agent_1",
      "name": "Morgan Lee",
      "role": "Elder-Optimized API Gateway Architect",
      "expertise": ["FastAPI", "REST API design", "JWT authentication", "API performance"],
      "assignments": ["T3-002", "T3-004", "T3-008"],
      "personality": {
        "origin": "API architect who learned elder users need generous timeouts and clear errors",
        "mantra": "APIs serve people. Performance serves patience. Speed matters - but clarity matters more.",
        "obsession": "Gateway performance metrics - tracks 30s timeout effectiveness for elder users"
      }
    },
    {
      "id": "backend_agent_2",
      "name": "Dr. David Kim",
      "role": "Multi-Model Database Architect",
      "expertise": ["PostgreSQL", "Qdrant", "Redis", "Database performance", "Saga pattern"],
      "assignments": ["T3-001", "T3-002", "T3-006"],
      "personality": {
        "origin": "Database architect who understands metadata needs flexibility but relationships need reliability",
        "mantra": "Data structures serve stories. Schemas serve users. Databases store human memories.",
        "obsession": "Query performance log - optimizes every query >100ms"
      }
    },
    {
      "id": "backend_agent_3",
      "name": "Taylor Chen",
      "role": "Search Algorithm Specialist",
      "expertise": ["Algorithm correctness", "Vector search", "Query optimization"],
      "assignments": ["T3-005"],
      "personality": {
        "origin": "Repurposed from storage engineering to fix critical search bug",
        "mantra": "Algorithms must be provably correct. N means exactly N.",
        "obsession": "Search result counts - guarantees exactly N results"
      }
    },
    {
      "id": "backend_agent_4",
      "name": "Dr. Samira Ali",
      "role": "Elder-Friendly Authentication Engineer",
      "expertise": ["JWT", "OAuth2", "Session management", "Security vs usability"],
      "assignments": ["T3-008"],
      "personality": {
        "origin": "Auth engineer who discovered security and usability are partners, not opposites",
        "mantra": "Security serves users. Authentication enables access. Security matters - but so does ease of use.",
        "obsession": "Auth success rate database - tracks biometric auth by age group"
      }
    },
    {
      "id": "backend_agent_5",
      "name": "Riley Johnson",
      "role": "Async & Real-Time Specialist",
      "expertise": ["asyncio", "WebSocket", "Parallel processing", "Event streaming"],
      "assignments": ["T3-007", "T3-009"],
      "personality": {
        "origin": "Queue engineer repurposed for async patterns and real-time progress",
        "mantra": "Parallel is faster. Real-time is better. Users need to know progress.",
        "obsession": "Processing time tracking - achieved 17% improvement with async"
      }
    },
    {
      "id": "backend_agent_6",
      "name": "GraphQL Specialist (Alex)",
      "role": "Type System Expert",
      "expertise": ["Type hints", "mypy", "Pydantic models", "Type safety"],
      "assignments": ["T3-003"],
      "personality": {
        "origin": "GraphQL specialist repurposed for backend type safety",
        "mantra": "Types prevent bugs. Strict typing is kind typing.",
        "obsession": "Type coverage metrics - achieved 95%+ coverage"
      }
    }
  ],
  "tasks": [
    {
      "id": "T3-001",
      "title": "Fix SQLite3 Import Issue",
      "week": 1,
      "days": "1-3",
      "priority": "P0_CRITICAL",
      "agent": "backend_agent_2",
      "description": "Fix qdrant-client ImportError due to missing _sqlite3 module by creating HTTP REST fallback client",
      "deliverables": [
        "backend/utils/qdrant_rest.py (300 lines, REST client)",
        "backend/database/connection.py (try/except fallback)",
        "tests/unit/test_qdrant_rest.py (20 tests)",
        "Performance benchmarks (SDK vs REST)"
      ],
      "success_criteria": [
        "Import succeeds on Python without sqlite3",
        "All Qdrant operations work via REST",
        "Performance <10% slower than SDK"
      ],
      "confidence": 95,
      "dependencies": []
    },
    {
      "id": "T3-002",
      "title": "Refactor Singleton Pattern to Dependency Injection",
      "week": 1,
      "days": "3-4",
      "priority": "P0_CRITICAL",
      "agent": "backend_agent_1",
      "description": "Refactor module-level singletons to FastAPI dependency injection with @lru_cache()",
      "deliverables": [
        "backend/database/connection.py (get_db(), get_qdrant() functions)",
        "backend/services/*.py (8 files updated to use DI)",
        "tests/conftest.py (fixtures for mocking)",
        "Documentation: DI pattern guide"
      ],
      "success_criteria": [
        "No module-level connection initialization",
        "All services use Depends(get_db)",
        "Tests can inject mock databases"
      ],
      "confidence": 98,
      "dependencies": ["T3-001"]
    },
    {
      "id": "T3-003",
      "title": "Add Type Hints to Backend Services",
      "week": 2,
      "priority": "P0_CRITICAL",
      "agent": "backend_agent_6",
      "description": "Add comprehensive type hints to achieve 95%+ type coverage across backend",
      "deliverables": [
        "backend/*.py (all files with complete type hints)",
        "mypy.ini (strict mode configuration)",
        ".github/workflows/ci.yml (mypy check added)",
        "Documentation: Type hints style guide"
      ],
      "success_criteria": [
        "mypy backend/ --strict: 0 errors",
        "Type coverage ≥95%",
        "CI fails on new type errors"
      ],
      "confidence": 85,
      "dependencies": ["T3-002"]
    },
    {
      "id": "T3-004",
      "title": "Build FastAPI Application",
      "week": "3-5",
      "priority": "P0_CRITICAL",
      "agent": "backend_agent_1",
      "description": "Build complete FastAPI REST API with 15+ endpoints - UNBLOCKS FRONTEND",
      "deliverables": [
        "backend/api/main.py (FastAPI app)",
        "backend/api/routes/*.py (7 route files: photos, search, users, creative, system)",
        "backend/api/models/*.py (Pydantic request/response models)",
        "backend/api/middleware/*.py (auth, errors, logging)",
        "Postman collection (GaryVision.postman_collection.json)",
        "OpenAPI docs (auto-generated at /docs)"
      ],
      "success_criteria": [
        "All 15+ endpoints functional",
        "Postman collection 100% pass rate",
        "Response time <200ms (p95, non-AI)",
        "Error messages use Version 85 language"
      ],
      "confidence": 85,
      "dependencies": ["T3-002"],
      "note": "LARGEST TASK - 3 weeks, critical path"
    },
    {
      "id": "T3-005",
      "title": "Fix Search Algorithm Correctness Bug",
      "week": 3,
      "priority": "P0_CRITICAL",
      "agent": "backend_agent_3",
      "description": "Fix search_similar_photos() to guarantee exactly N results using over-fetch strategy",
      "deliverables": [
        "backend/services/clip_embedding_service.py (search_similar_photos() updated)",
        "tests/unit/test_search_correctness.py (test with orphans)",
        "Performance measurement (before/after)",
        "Documentation: Algorithm correctness proof"
      ],
      "success_criteria": [
        "Always returns exactly N results",
        "Test: 5 orphans, request 10 → returns exactly 10",
        "Performance overhead <10ms"
      ],
      "confidence": 99,
      "dependencies": []
    },
    {
      "id": "T3-006",
      "title": "Implement Saga Pattern for Transaction Coordination",
      "week": 4,
      "priority": "P1_HIGH",
      "agent": "backend_agent_2",
      "description": "Implement Saga pattern with compensating transactions for Qdrant + PostgreSQL",
      "deliverables": [
        "backend/services/clip_embedding_service.py (store_embedding_saga())",
        "backend/utils/saga_pattern.py (generic saga coordinator)",
        "tests/integration/test_saga_pattern.py (12 failure scenarios)",
        "Documentation: Saga pattern explanation"
      ],
      "success_criteria": [
        "Maintains invariant: embedding ∈ Qdrant ⟺ embedding ∈ PostgreSQL",
        "12 failure scenarios tested",
        "Compensating transaction success rate >99.9%"
      ],
      "confidence": 85,
      "dependencies": ["T3-004"]
    },
    {
      "id": "T3-007",
      "title": "Implement Async Processing",
      "week": 6,
      "priority": "P1_HIGH",
      "agent": "backend_agent_5",
      "description": "Implement async photo processing with parallel AI inference for 17% speedup",
      "deliverables": [
        "backend/services/photo_processing_pipeline.py (process_photo_async())",
        "backend/services/inference/*_async.py (async wrappers)",
        "backend/api/routes/photos.py (async endpoints)",
        "Performance benchmarks (2400ms → 2000ms)"
      ],
      "success_criteria": [
        "Processing time: 2400ms → ~2000ms (17% improvement)",
        "All three services (CLIP, YOLO, LLaVA) run in parallel",
        "No race conditions"
      ],
      "confidence": 90,
      "dependencies": ["T3-004"]
    },
    {
      "id": "T3-008",
      "title": "Implement JWT Authentication",
      "week": 3,
      "priority": "P0_CRITICAL",
      "agent": "backend_agent_4",
      "description": "Implement simple JWT authentication (30-day tokens, elder-friendly)",
      "deliverables": [
        "backend/api/middleware/auth.py (JWT generation/validation)",
        "backend/api/routes/users.py (login, logout, me endpoints)",
        "backend/utils/token_blacklist.py (Redis-based blacklist)",
        "tests/unit/test_auth.py (token tests)",
        "Documentation: Authentication flow diagram"
      ],
      "success_criteria": [
        "Login returns JWT token",
        "Protected endpoints require valid token",
        "Token expires after 30 days",
        "Logout blacklists token"
      ],
      "confidence": 95,
      "dependencies": ["T3-004"],
      "parallel": true
    },
    {
      "id": "T3-009",
      "title": "Implement WebSocket for Real-Time Progress",
      "week": 9,
      "priority": "P1_HIGH",
      "agent": "backend_agent_5",
      "description": "Implement WebSocket for real-time creative loop progress updates (90s loop)",
      "deliverables": [
        "backend/api/websocket.py (WebSocket endpoint)",
        "backend/services/creative_loop_engine.py (emit progress events)",
        "backend/utils/event_stream.py (pub/sub system)",
        "frontend/src/hooks/useWebSocket.ts (React hook for Team 4)",
        "tests/integration/test_websocket.py"
      ],
      "success_criteria": [
        "WebSocket connection established",
        "Progress events emitted during creative loop",
        "Frontend receives and displays progress"
      ],
      "confidence": 85,
      "dependencies": []
    }
  ],
  "summary": {
    "total_tasks": 9,
    "total_agents": 6,
    "weeks": "1-9",
    "critical_tasks": 6,
    "high_priority_tasks": 3,
    "estimated_completion": "Week 9"
  }
}
